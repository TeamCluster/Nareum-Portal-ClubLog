{% extends "base.html" %}

{% block title %}동아리 활동일지{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/club-diary.css') }}">
<div class="form-container">
    <h2>동아리 활동일지</h2>
	<form action="/" method="POST">
    	<label for="category">동아리 분야:</label>
    	<input type="text" id="category" name="category" readonly><br>
    	
    	<label for="club-name">동아리 명:</label>
    	<select id="club-name" name="club_name" required>
        <option value="" disabled selected>선택해주십시오</option>
    		{% for name in club_names %}
        		<option value="{{ name }}">{{ name }}</option>
    		{% endfor %}
    	</select><br>
		
		<label>활동 일자:</label>
		<div class="form-section">
        	<input type="text" name="activity_year" placeholder="YYYY" required>
        	<input type="text" name="activity_month" placeholder="MM" required>
        	<input type="text" name="activity_day" placeholder="DD" required>
        </div>

        <label>시작 시간:</label>
        <input type="text" name="start_hour" placeholder="HH" required> :
        <input type="text" name="start_minute" placeholder="MM" required>
        <br>

        <label>종료 시간:</label>
        <input type="text" name="end_hour" placeholder="HH" required> :
        <input type="text" name="end_minute" placeholder="MM" required>
        <br>

        <label>참여자 (쉼표로 구분):</label>
        <input type="text" name="participants" required><br>

        <label>초등 남:</label>
        <input type="number" name="element_man" value="0"><br>

        <label>초등 여:</label>
        <input type="number" name="element_woman" value="0"><br>

        <label>중등 남:</label>
        <input type="number" name="middle_man" value="0"><br>

        <label>중등 여:</label>
        <input type="number" name="middle_woman" value="0"><br>

        <label>고등 남:</label>
        <input type="number" name="high_man" value="0"><br>

        <label>고등 여:</label>
        <input type="number" name="high_woman" value="0"><br>

        <label>후기 남:</label>
        <input type="number" name="univ_man" value="0"><br>

        <label>후기 여:</label>
        <input type="number" name="univ_woman" value="0"><br>
        
        <label>작성자:</label>
        <input type="text" name="author" required><br>

        <label>활동 내용:</label>
        <textarea name="activity_content" rows="6" required></textarea><br>

        <button type="submit">저장하기</button>
    </form>
</div>

<script>
  const clubDict = {{ club_dict | tojson }};
  const clubNameSelect = document.getElementById('club-name');
  const categoryInput = document.getElementById('category');
 clubNameSelect.addEventListener('change', function () {
    const selectedClub = this.value;
    categoryInput.value = clubDict[selectedClub] || '';
  });
// 초기 로드시 자동 분류 반영
  window.onload = function () {
    const selectedClub = clubNameSelect.value;
    categoryInput.value = clubDict[selectedClub] || '';
  };
</script>
{% endblock %}